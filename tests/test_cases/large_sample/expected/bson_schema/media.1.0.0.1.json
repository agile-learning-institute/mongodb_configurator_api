{
  "title": "Media Collection",
  "description": "A media item in the system",
  "bsonType": "object",
  "properties": {
    "_id": {
      "description": "The unique identifier for the media",
      "bsonType": "objectId"
    },
    "title": {
      "description": "The title of the media",
      "bsonType": "string",
      "pattern": "^[a-zA-Z0-9\\s.,!?-]{4,255}$"
    },
    "type": {
      "description": "The type of media",
      "bsonType": "string",
      "enum": ["image", "video", "audio", "document"]
    },
    "status": {
      "description": "The status",
      "bsonType": "string",
      "enum": ["draft", "active", "archived"]
    },
    "last_saved": {
      "description": "The last time this document was saved",
      "bsonType": "object",
      "properties": {
        "from_ip": {
          "description": "The IP address of the user who saved the document",
          "bsonType": "string",
          "pattern": "^[a-zA-Z0-9_-]{4,40}$"
        },
        "by_user": {
          "description": "The user who saved the document",
          "bsonType": "string",
          "pattern": "^[a-zA-Z0-9_-]{4,40}$"
        },
        "at_time": {
          "description": "The time the document was saved",
          "bsonType": "date"
        },
        "correlation_id": {
          "description": "The correlation ID of the document",
          "bsonType": "string",
          "pattern": "^[a-zA-Z0-9_-]{4,40}$"
        }
      },
      "required": ["from_ip", "by_user", "at_time", "correlation_id"],
      "additionalProperties": false
    },
    "tags": {
      "description": "The tags of the media",
      "bsonType": "array",
      "items": {
        "bsonType": "string",
        "enum": ["featured", "popular", "trending", "new", "updated"]
      }
    },
    "metadata": {
      "description": "The metadata of the media",
      "bsonType": "object",
      "properties": {
        "duration": {
          "description": "The duration of the media",
          "bsonType": "int",
          "minimum": 0
        },
        "format": {
          "description": "The format of the media",
          "bsonType": "string",
          "enum": ["mp4", "mp3", "jpg", "png", "pdf"]
        },
        "quality": {
          "description": "The quality of the media",
          "bsonType": "string",
          "enum": ["low", "medium", "high", "ultra"]
        }
      },
      "required": ["duration", "format", "quality"],
      "additionalProperties": false
    }
  },
  "required": ["_id", "title", "status", "last_saved"],
  "additionalProperties": false
}
