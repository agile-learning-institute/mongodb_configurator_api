$schema: http://json-schema.org/draft-07/schema#
title: User Collection
description: A collection of users
type: object
required:
  - _id
  - user_name
  - status
  - last_saved
  - full_name
  - email
properties:
  _id:
    type: string
    description: The unique identifier for this user
    pattern: ^[0-9a-fA-F]{24}$
  user_name:
    type: string
    description: The user's username
    minLength: 3
    maxLength: 50
    pattern: ^[a-zA-Z0-9_-]{3,50}$
  first_name:
    type: string
    description: The user's first name
    minLength: 1
    maxLength: 100
    pattern: ^[a-zA-Z0-9\s'-]{1,100}$
  last_name:
    type: string
    description: The user's last name
    minLength: 1
    maxLength: 100
    pattern: ^[a-zA-Z0-9\s'-]{1,100}$
  full_name:
    type: string
    description: The user's full name
    minLength: 1
    maxLength: 201
    pattern: ^[a-zA-Z0-9\s'-]{1,201}$
  status:
    type: string
    description: The user's status
    enum:
      - draft
      - active
      - archived
  categories:
    type: array
    description: The user's categories
    items:
      type: string
      enum:
        - admin
        - user
        - guest
  email:
    type: string
    description: The user's email address
    format: email
    pattern: ^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$
  phone:
    type: string
    description: The user's phone number
    pattern: ^\+?[1-9]\d{1,14}$
  last_saved:
    type: object
    description: Information about the last save action
    required:
      - from_ip
      - by_user
      - at_time
      - correlation_id
    properties:
      from_ip:
        type: string
        description: The IP address of the client that made the request
        pattern: ^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$
      by_user:
        type: string
        description: The ID of the user who made the request
        pattern: ^[0-9a-fA-F]{24}$
      at_time:
        type: string
        description: The timestamp of the request
        format: date-time
      correlation_id:
        type: string
        description: The correlation ID for the request
        pattern: ^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$ 