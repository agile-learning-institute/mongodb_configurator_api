title: Notification Collection
description: Collection for managing user notifications
name: notification
versions:
  - version: "1.0.0.1"
    add_indexes:
      - name: userIndex
        key:
          user_id: 1
        options:
          unique: false
      - name: statusIndex
        key:
          status: 1
        options:
          unique: false
    test_data: notification.1.0.0.1.json
  - version: "1.0.0.2"
    add_indexes:
      - name: typeIndex
        key:
          notification_type: 1
        options:
          unique: false
    test_data: notification.1.0.0.2.json
  - version: "1.0.1.3"
    migrations:
      - name: "merge_notification_data"
        pipeline:
          - $addFields:
              full_message: { $concat: ["$title", ": ", "$message"] }
          - $unset:
              - "message"
          - $out: "notification"
    test_data: notification.1.0.1.3.json 